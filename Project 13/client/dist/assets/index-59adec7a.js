(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();function _(e){return e}function q(e){return e.length===0?_:e.length===1?e[0]:function(t){return e.reduce((n,o)=>o(n),t)}}function C(e){const r={subscribe(t){let n=null,o=!1,i=!1,c=!1;function s(){if(n===null){c=!0;return}i||(i=!0,typeof n=="function"?n():n&&n.unsubscribe())}return n=e({next(u){var l;o||(l=t.next)==null||l.call(t,u)},error(u){var l;o||(o=!0,(l=t.error)==null||l.call(t,u),s())},complete(){var u;o||(o=!0,(u=t.complete)==null||u.call(t),s())}}),c&&s(),{unsubscribe:s}},pipe(...t){return q(t)(r)}};return r}function D(e){return r=>{let t=0,n=null;const o=[];function i(){n||(n=r.subscribe({next(s){var u;for(const l of o)(u=l.next)==null||u.call(l,s)},error(s){var u;for(const l of o)(u=l.error)==null||u.call(l,s)},complete(){var s;for(const u of o)(s=u.complete)==null||s.call(u)}}))}function c(){if(t===0&&n){const s=n;n=null,s.unsubscribe()}}return{subscribe(s){return t++,o.push(s),i(),{unsubscribe(){t--,c();const u=o.findIndex(l=>l===s);u>-1&&o.splice(u,1)}}}}}}class O extends Error{constructor(r){super(r),this.name="ObservableAbortError",Object.setPrototypeOf(this,O.prototype)}}function U(e){let r;return{promise:new Promise((n,o)=>{let i=!1;function c(){i||(i=!0,o(new O("This operation was aborted.")),s.unsubscribe())}const s=e.subscribe({next(u){i=!0,n(u),c()},error(u){i=!0,o(u),c()},complete(){i=!0,c()}});r=c}),abort:r}}function H(e){return C(r=>{function t(o=0,i=e.op){const c=e.links[o];if(!c)throw new Error("No more links to execute - did you forget to add an ending link?");return c({op:i,next(u){return t(o+1,u)}})}return t().subscribe(r)})}function z(e){return e instanceof b||e.name==="TRPCClientError"}class b extends Error{static from(r,t={}){return r instanceof Error?z(r)?(t.meta&&(r.meta={...r.meta,...t.meta}),r):new b(r.message,{...t,cause:r,result:null}):new b(r.error.message??"",{...t,cause:void 0,result:r})}constructor(r,t){var o,i;const n=t==null?void 0:t.cause;super(r,{cause:n}),this.meta=t==null?void 0:t.meta,this.cause=n,this.shape=(o=t==null?void 0:t.result)==null?void 0:o.error,this.data=(i=t==null?void 0:t.result)==null?void 0:i.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,b.prototype)}}function A(e){const r=Object.create(null);for(const t in e){const n=e[t];r[n]=t}return r}const N={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};A(N);A(N);const I=()=>{};function L(e,r){return new Proxy(I,{get(n,o){if(!(typeof o!="string"||o==="then"))return L(e,[...r,o])},apply(n,o,i){const c=r[r.length-1]==="apply";return e({args:c?i.length>=2?i[1]:[]:i,path:c?r.slice(0,-1):r})}})}const $=e=>L(e,[]),k=e=>new Proxy(I,{get(r,t){if(!(typeof t!="string"||t==="then"))return e(t)}}),R=e=>typeof e=="function";function M(e){if(e)return e;if(typeof window<"u"&&R(window.fetch))return window.fetch;if(typeof globalThis<"u"&&R(globalThis.fetch))return globalThis.fetch;throw new Error("No fetch implementation found")}function B(e){return e||(typeof window<"u"&&window.AbortController?window.AbortController:typeof globalThis<"u"&&globalThis.AbortController?globalThis.AbortController:null)}function F(e){return{url:e.url,fetch:e.fetch,AbortController:B(e.AbortController)}}function J(e){const r={};for(let t=0;t<e.length;t++){const n=e[t];r[t]=n}return r}const Y={query:"GET",mutation:"POST"};function j(e){return"input"in e?e.runtime.transformer.serialize(e.input):J(e.inputs.map(r=>e.runtime.transformer.serialize(r)))}const S=e=>{let r=e.url+"/"+e.path;const t=[];if("inputs"in e&&t.push("batch=1"),e.type==="query"){const n=j(e);n!==void 0&&t.push(`input=${encodeURIComponent(JSON.stringify(n))}`)}return t.length&&(r+="?"+t.join("&")),r},G=e=>{if(e.type==="query")return;const r=j(e);return r!==void 0?JSON.stringify(r):void 0},K=e=>V({...e,contentTypeHeader:"application/json",getUrl:S,getBody:G});async function Q(e,r){const t=e.getUrl(e),n=e.getBody(e),{type:o}=e,i=await e.headers();/* istanbul ignore if -- @preserve */if(o==="subscription")throw new Error("Subscriptions should use wsLink");const c={...e.contentTypeHeader?{"content-type":e.contentTypeHeader}:{},...e.batchModeHeader?{"trpc-batch-mode":e.batchModeHeader}:{},...i};return M(e.fetch)(t,{method:Y[o],signal:r==null?void 0:r.signal,body:n,headers:c})}function V(e){const r=e.AbortController?new e.AbortController:null,t={};return{promise:new Promise((i,c)=>{Q(e,r).then(s=>(t.response=s,s.json())).then(s=>{t.responseJSON=s,i({json:s,meta:t})}).catch(s=>{c(b.from(s,{meta:t}))})}),cancel:()=>{r==null||r.abort()}}}function x(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}function v(e,r){if("error"in e){const n=r.transformer.deserialize(e.error);return{ok:!1,error:{...e,error:n}}}return{ok:!0,result:{...e.result,...(!e.result.type||e.result.type==="data")&&{type:"data",data:r.transformer.deserialize(e.result.data)}}}}class w extends Error{constructor(){super("Unable to transform response from server")}}function Z(e,r){let t;try{t=v(e,r)}catch{throw new w}if(!t.ok&&(!x(t.error.error)||typeof t.error.error.code!="number"))throw new w;if(t.ok&&!x(t.result))throw new w;return t}const E=()=>{throw new Error("Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new")};function P(e){let r=null,t=null;const n=()=>{clearTimeout(t),t=null,r=null};function o(s){var p,h;const u=[[]];let l=0;for(;;){const f=s[l];if(!f)break;const d=u[u.length-1];if(f.aborted){(p=f.reject)==null||p.call(f,new Error("Aborted")),l++;continue}if(e.validate(d.concat(f).map(a=>a.key))){d.push(f),l++;continue}if(d.length===0){(h=f.reject)==null||h.call(f,new Error("Input is too big for a single dispatch")),l++;continue}u.push([])}return u}function i(){const s=o(r);n();for(const u of s){if(!u.length)continue;const l={items:u,cancel:E};for(const d of u)d.batch=l;const p=(d,m)=>{var y;const a=l.items[d];(y=a.resolve)==null||y.call(a,m),a.batch=null,a.reject=null,a.resolve=null},{promise:h,cancel:f}=e.fetch(l.items.map(d=>d.key),p);l.cancel=f,h.then(d=>{var m;for(let a=0;a<d.length;a++){const y=d[a];p(a,y)}for(const a of l.items)(m=a.reject)==null||m.call(a,new Error("Missing result")),a.batch=null}).catch(d=>{var m;for(const a of l.items)(m=a.reject)==null||m.call(a,d),a.batch=null})}}function c(s){const u={aborted:!1,key:s,batch:null,resolve:E,reject:E},l=new Promise((h,f)=>{u.reject=f,u.resolve=h,r||(r=[]),r.push(u)});return t||(t=setTimeout(i)),{promise:l,cancel:()=>{var h;u.aborted=!0,(h=u.batch)!=null&&h.items.every(f=>f.aborted)&&(u.batch.cancel(),u.batch=null)}}}return{load:c}}function W(e){return function(t){const n=F(t),o=t.maxURLLength??1/0;return i=>{const c=h=>{const f=m=>{if(o===1/0)return!0;const a=m.map(T=>T.path).join(","),y=m.map(T=>T.input);return S({...n,runtime:i,type:h,path:a,inputs:y}).length<=o},d=e({...n,runtime:i,type:h,opts:t});return{validate:f,fetch:d}},s=P(c("query")),u=P(c("mutation")),l=P(c("subscription")),p={query:s,subscription:l,mutation:u};return({op:h})=>C(f=>{const d=p[h.type],{promise:m,cancel:a}=d.load(h);let y;return m.then(g=>{y=g;const T=Z(g.json,i);if(!T.ok){f.error(b.from(T.error,{meta:g.meta}));return}f.next({context:g.meta,result:T.result}),f.complete()}).catch(g=>{f.error(b.from(g,{meta:y==null?void 0:y.meta}))}),()=>{a()}})}}}const X=e=>r=>{const t=r.map(c=>c.path).join(","),n=r.map(c=>c.input),{promise:o,cancel:i}=K({...e,path:t,inputs:n,headers(){return e.opts.headers?typeof e.opts.headers=="function"?e.opts.headers({opList:r}):e.opts.headers:{}}});return{promise:o.then(c=>(Array.isArray(c.json)?c.json:r.map(()=>c.json)).map(l=>({meta:c.meta,json:l}))),cancel:i}},ee=W(X);class te{$request({type:r,input:t,path:n,context:o={}}){return H({links:this.links,op:{id:++this.requestId,type:r,path:n,input:t,context:o}}).pipe(D())}requestAsPromise(r){const t=this.$request(r),{promise:n,abort:o}=U(t);return new Promise((c,s)=>{var u;(u=r.signal)==null||u.addEventListener("abort",o),n.then(l=>{c(l.result.data)}).catch(l=>{s(b.from(l))})})}query(r,t,n){return this.requestAsPromise({type:"query",path:r,input:t,context:n==null?void 0:n.context,signal:n==null?void 0:n.signal})}mutation(r,t,n){return this.requestAsPromise({type:"mutation",path:r,input:t,context:n==null?void 0:n.context,signal:n==null?void 0:n.signal})}subscription(r,t,n){return this.$request({type:"subscription",path:r,input:t,context:n==null?void 0:n.context}).subscribe({next(i){var c,s,u;i.result.type==="started"?(c=n.onStarted)==null||c.call(n):i.result.type==="stopped"?(s=n.onStopped)==null||s.call(n):(u=n.onData)==null||u.call(n,i.result.data)},error(i){var c;(c=n.onError)==null||c.call(n,i)},complete(){var i;(i=n.onComplete)==null||i.call(n)}})}constructor(r){this.requestId=0;const t=(()=>{const n=r.transformer;return n?"input"in n?r.transformer:{input:n,output:n}:{input:{serialize:o=>o,deserialize:o=>o},output:{serialize:o=>o,deserialize:o=>o}}})();this.runtime={transformer:{serialize:n=>t.input.serialize(n),deserialize:n=>t.output.deserialize(n)},combinedTransformer:t},this.links=r.links.map(n=>n(this.runtime))}}const re={query:"query",mutate:"mutation",subscribe:"subscription"},ne=e=>re[e];function oe(e){return k(r=>e.hasOwnProperty(r)?e[r]:r==="__untypedClient"?e:$(({path:t,args:n})=>{const o=[r,...t],i=ne(o.pop()),c=o.join(".");return e[i](c,...n)}))}function ie(e){const r=new te(e);return oe(r)}const ue=ie({links:[ee({url:"http://localhost:3000/trpc"})]});async function ce(){console.log(await ue.updateUser.mutate({userId:"341",name:"Kely"}))}ce();
